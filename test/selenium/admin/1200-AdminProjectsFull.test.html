#{fixture 'util.TestDataLoader' /}

#{selenium 'Test 1200-Admin Projects Full'}

    // Try to log in the administration area
    clearSession()
    open('/admin')
    assertTextPresent('Oxiras Test Management Suite')
    type('username', 'gwenael.alizon@oxiras.com')
    type('password', 'gwen')
    clickAndWait('signin')

    // Try to access the user administration area and check that it contains the expected tabs
    waitForElementPresent('//ul[@id='tabs_header']/li[2]/a/span')
    clickAndWait('//ul[@id='tabs_header']/li[2]/a/span')
    verifyElementPresent('create_category')
    verifyElementPresent('create_project')
    verifyElementPresent('remove')
    verifyElementPresent('//a[@id='projectDetailsLink']/span')
    verifyElementPresent('//a[@id='rolesLink']/span')
    verifyElementPresent('//a[@id='usersLink']/span')

    // PROJECT DETAILS
    // Verify presence of a random project
    verifyTextPresent('Test Management Application')

    // Attempt new project category creation
    click('//li[@id='node_root_0']/a')
    click('create_category')
    type('//li[@id='node_root_0']/ul/li[3]/input','Test category')
    fireEvent('//li[@id='node_root_0']/ul/li[3]/input','blur')
    waitForElementPresent('//li[@id='node_category_3']')
    // Verify new project category available in tree at expected location
    verifyText('//li[@id='node_category_3']','Test category')

    // Attempt new project creation
    click('//li[@id='node_category_3']/a')
    click('create_project')
    type('//li[@id='node_category_3']/ul/li/input','Test project')
    fireEvent('//li[@id='node_category_3']/ul/li/input','blur')
    waitForElementPresent('//li[@id='node_default_4']')
    // Verify new project available in tree at expected location
    verifyText('//li[@id='node_default_4']','Test project')

    // Check content of project details edit form
    click('//li[@id='node_default_4']/a')
    waitForElementPresent('project_name')
    waitForValue('project_name','Test project')
    waitForElementPresent('projectForm_submit')


#{/selenium}
