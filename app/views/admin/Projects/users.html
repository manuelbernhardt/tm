#{if project == null}
No project selected
#{/if}
#{else}

<div id="treeDiv">
  #{infoBox}
  Assign project roles to users by dragging them into the desired role.
  #{/}
  <button id="removeRoleButton">Remove</button>
  <div class="container">
    <div class="left_column">
      <div id="projectRolesAssignmentTree"></div>
    </div>
    <div class="right_column">
      <div id="userTree"></div>
    </div>
  </div>
</div>

  <script type="text/javascript">

    $(document).ready(function () {

      $("#projectRolesAssignmentTree").tree({"args" : {"projectId": "${project.id}"}, types: projectRolesAssignmentTreeTypes});
      $("#userTree").tree({types: userTreeTypes});

      $("#removeRoleButton").button({icons: {primary: 'ui-icon-minus'}, disabled: true}).click(function() {
        $("#projectRolesAssignmentTree").jstree("remove", null);
      });

      $("#projectRolesAssignmentTree").bind("select_node.jstree", function (e, data) {
        if (isSelectedNodeType(data, ["default", "user"])) {
          $('#removeRoleButton').button('enable');
        } else {
          $('#removeRoleButton').button('disable');
        }
      });

    });
  </script>
  #{/else}